<input type="text" class="inputToDo" placeholder="請輸入待辦事項">
<input type="button" value="儲存" id="btnInput">
<div class="alertMsg"></div>
<ul class="toDoList">
</ul>

<script>

    //實作關注點分離：資料，方法，生命週期
const toDoList = document.querySelector(".toDoList");
const component = {
  //toDoList的資料集
  data: {
    toDoList: [],
    //驗證欄位的警示訊息
    message: "不能為空！"
  },
  //渲染方法
  renderList: function () {
    const content = this.data.toDoList
      .map(
        (item, i) =>
          `<li>${item}<input type="button" value="刪除" data-id="${i}" id="btnDelete"></li>`
      )
      .join("");
    toDoList.innerHTML = content;
  },
  //新增方法
  addItem: function () {
    const vm = this;
    const inputToDo = document.querySelector(".inputToDo");
    const btnInput = document.querySelector("#btnInput");
    const alertMsg = document.querySelector(".alertMsg");
    btnInput.addEventListener("click", (e) => {
      if (inputToDo.value == "") {
        alertMsg.innerHTML = vm.data.message;
      } else {
        alertMsg.innerHTML = "";
        vm.data.toDoList.push(inputToDo.value);
        vm.renderList();
        inputToDo.value = "";
      }
    });
  },
  //刪除方法
  deleteItem: function () {
    const vm = this;
    toDoList.addEventListener("click", (e) => {
      if (e.target.dataset.id) {
        const index = e.target.dataset.id;
        console.log(vm.data.toDoList);
        vm.data.toDoList.splice(index, 1);
        vm.renderList();
      }
    });
  },
  //生命週期：初始化
  init: function () {
    this.renderList();
    this.addItem();
    this.deleteItem();
  }
};
component.init();

</Script>

