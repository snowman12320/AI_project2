<!DOCTYPE html>
<html>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <!-- JavaScript Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ" crossorigin="anonymous"></script> 
    
<head>
    <meta charset="UTF-8">
    <title>給您最OK的房屋👌</title>
    
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
    <link rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.css">
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script src="https://unpkg.com/bootstrap-table@1.16.0/dist/bootstrap-table.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.css">
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet"><!--google icon css -->
    <link rel="shortcut icon" href="/static/1651852388.ico" />
</head>

<!--pyecharts-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.1.2/echarts.min.js" integrity="sha512-ppWbHq6q2f7HAwS481w6qikuC0XEeBnmkRg6KWnWg3zSIbJwWWBgsCDMAxzSB7SVqXzWwSYQ2s8TSJKjnaikMg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
<!--pyecharts-->


<body onload="myFunction()">
    <img id="showTable" onclick="showTable()"  href="javascript:;" style="margin-left:1500px;position: fixed;width: 10;margin-top: 700px;" src="/static/計算機.jpeg" >


<div class="topbar" >
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <div class="container-fluid">
        <img style="width:200px;"src="./static/okwhite.jpeg" class="navbar-brand" href="#"></img>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarText" aria-controls="navbarText" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarText">
            
            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
            <li class="nav-item">
                <a style="font-size: 18px;"class="nav-link active" aria-current="page" href="/">首頁</a>
            </li>
            <li class="nav-item">
                <a style="font-size: 18px;"class="nav-link" href="index">實價登陸</a>
            </li>
            <li class="nav-item">
                <a style="font-size: 18px;"class="nav-link" href="/house_forecast">房價預測</a>
            </li>
            <li class="nav-item">
                <a style="font-size: 18px;"class="nav-link" href="/team">團隊介紹</a>
            </li>             
            </ul>
            {% if session['name'] %}
            <div class="alert alert-light" role="alert">
                <center><img src="/static/user32.png"><a style="color: #5D95F1;"href="/member" class="alert-link">{{session['name']}}  /</a> <a style="color:red;"href="/logout" class="alert-link">登出</a></img> 
            </div>
            {% else %}
            <span class="navbar-text">
                <center><img src="/static/user32.png"><a  style="font-size: 18px;color: #5D95F1;"class="nav-link" href="/login" >登入/註冊</a></img> 
            </span>
            {% endif %}

        </div>
        </div>
    </nav>  

</div>



<script language="javascript">
    window.onload=function(){
    var a = document.getElementById("loading");
    a.parentNode.removeChild(a);
    }
    document.write(' <div  id="loading" style="background:white;color:black;width:100%;height:100%; line-height:900px;position: absolute;top: 50%;left: 50%;transform: translate(-50%,-50%);font-size: 40px;letter-spacing: 10px;text-align:center;z-index:99999"><div class="spinner-border text-warning" role="status"><span class="visually-hidden">Loading...</span></div></div> ');  
</script>


</script>   
<div class="div_echarts">
    <div id="echarts"  class="plot"style="width:100vw;height:30vh;">
        <center>預計這裡會顯示圖表</center>
        {{ data_plot | safe }}
        
    </div>   
</div>   

<div class="top_color"><center>實價登錄查詢</div>     

    
<div id="srcdetail" class="srcdetail">
    
            <div class="p-5" >
            
                
                <form method=post action="{{ url_for('index') }}">
                    <div class="flex-container">
                            <div class="item1">
                                <select name="selectarea"class="form-select"  required>
                                    <option selected disabled value="">選擇區域</option>
                                    <option value="大甲區">大甲區</option>
                                    <option value="大安區">大安區</option>
                                    <option value="大肚區">大肚區</option>
                                    <option value="大里區">大里區</option>
                                    <option value="大雅區">大雅區</option>
                                    <option value="中區">中區</option>
                                    <option value="太平區">太平區</option>
                                    <option value="北屯區">北屯區</option>
                                    <option value="北區">北區</option>
                                    <option value="外埔區">外埔區</option>
                                    <option value="石岡區">石岡區</option>
                                    <option value="后里區">后里區</option>
                                    <option value="西屯區">西屯區</option>
                                    <option value="西區">西區</option>
                                    <option value="沙鹿區">沙鹿區</option>
                                    <option value="和平區">和平區</option>
                                    <option value="東區">東區</option>
                                    <option value="東勢區">東勢區</option>
                                    <option value="南屯區">南屯區</option>
                                    <option value="南區">南區</option>
                                    <option value="烏日區">烏日區</option>
                                    <option value="神岡區">神岡區</option>
                                    <option value="清水區">清水區</option>
                                    <option value="新社區">新社區</option>
                                    <option value="潭子區">潭子區</option>
                                    <option value="龍井區">龍井區</option>
                                    <option value="豐原區">豐原區</option>
                                    <option value="霧峰區">霧峰區</option>
                                </select>
                            </div>
                            <div class="item2">
                                <input autocomplete="on" for="validationDefault03"  name="srcbar" class="form-control me-auto" type="search" placeholder="輸入地址或地段" >    
                            </div>
                            
                            <div class="item3">
                                <button class="btn btn-outline-success"  name="srcbtn" value="查詢">查詢</button>
                            </div>
                        
                            <div class="item4">
                                <button class="btn btn-outline-success"  name="mapbtn" value="地圖導覽">地圖導覽</button>
                            </div>

                    </div>
                <label>※房屋類型：1=華廈(10層以下有電梯) /2=透天厝 /3=公寓(5層以下無電梯) /4=住宅大樓(11層以上有電梯) /5=套房(一房一衛)/6.7=其他(包含店面工廠商辦)</label>
                <table id="sort-table"  class="table table-stripedp" style="width:100%;font-family:Century Gothic,Microsoft JhengHei,Apple LiGothic Medium,PMingLiU,sans-serif,serif;">
                    <thead>
                        <tr>
                            <th>地址</th>
                            <th>交易日期</th>
                            <th>屋齡</th>
                            <th>房屋類型</th>
                            <th>總售價(萬元)</th>
                            <th>單價(萬元)/坪</th>
                            <th>總坪數</th>
                            <th>房</th>
                            <th>廳</th>
                            <th>衛</th>
                        </tr>
                    </thead>

                    <tbody>
                        {%for detail in details%} 
                        <tr>
                            <td style="color:#5D95F1">
                                <img href="https://www.google.com.tw/maps/place/{{detail[0]}}"src="/static/place.svg"href="#"style="color:orange"></img>
                                <div class='fmap'>
                                    <embed
                                            width="400"
                                            height="400"
                                            frameborder="0" style="border:0"
                                            referrerpolicy="no-referrer-when-downgrade"
                                            src=https://maps.google.com/?q={{detail[0]}}&output=svembed
                                            allowfullscreen>
                                    </embed>
                                </div>
                                {{ detail[0] }}
                            </td>
                            <td>{{ detail[1] }}</td>
                            <td>{{ detail[2] }}</td>
                            <td>{{ detail[3] }}</td>
                            <td>{{ detail[4] }}</td>
                            <td>{{ detail[5] }}</td>
                            <td>{{ detail[6] }}</td>
                            <td>{{ detail[7] }}</td>
                            <td>{{ detail[8] }}</td>
                            <td>{{ detail[9] }}</td>
                        </tr>
                        {% endfor%}
                        
                        
                    </tbody>                
                </table>

            </div>
            <div style="clear:both;"></div><!--這是用來清除上方的浮動效果-->
            
            <div class="div_world "style= "width:30%;height:30%" >  
                <div id="echarts_world"  class="plot">
                    <center>
                    {{ data_world | safe }}
                    
                </div>   
            </div>
            

</div>  
        
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <script>
        var myChart = echarts.init(document.getElementById('echarts'));
        myChart.setOption( {{ data_plot | safe }});

        
    </script>
</body>






<style>
    .div_world{
        
        margin-left: 2%;
        border-radius: 30px;

    }
.top_color{
    margin-left:4%;
    margin-top: 5%;
    width:60vw;
    height:30px;
    background-color:  #5D95F1;
    color:#fff;
    font-family:Microsoft JhengHei;
    font-weight: 100;
    font-size:24px;
    border-radius: 30px 30px 0px 0px;
    -webkit-border-radius: 30px 30px 0px 0px;
    -moz-border-radius: 30px 30px 0px 0px;
}
.div_echarts{

        box-shadow: 0px 2px 17px #c3c3c3;
        -webkit-box-shadow: 0px 2px 17px #c3c3c3;
        -moz-box-shadow: 0px 2px 17px #c3c3c3;
}


    .srcdetail{
        display: flex;
        flex-direction:row;
    }
    .fmap {
        position: absolute;
        visibility: hidden;
        color:rgb(243, 190, 55);
        left: 70px;
        color: #fff;
        font-size: .8em;
        background: #b5bebf;
        padding: 5px;
        border-radius: 5px;
    }
    td:hover .fmap {
        visibility: visible;
        transition: visibility 0s .2s;
    }   
    .navbar-brand{
    
        background-size:  contain;
        border-radius: 10px;
        -webkit-border-radius: 10px;
        -moz-border-radius: 10px;
        padding: 15px 32px;
    }

    .flex-container{
        display: flex;
        flex-direction:row;
    }

    .p-5{
        margin-left: 4%;
        font-weight: bold;
        font-family:Microsoft JhengHei;
        font-size: 14px;
        background-color: #F8F9FA;
        width:60vw;
        line-height:50px;
        height:30%;

        border-radius: 0px 0px 30px 30px;
        -webkit-border-radius: 0px 0px 30px 30px;
        -moz-border-radius: 0px 0px 30px 30px;
        box-shadow: -1px 15px 21px #c3c3c3;
        -webkit-box-shadow: -1px 15px 21px #c3c3c3;
        -moz-box-shadow: -1px 15px 21px #c3c3c3;
    }
    
    .item3{
        
        margin-left: 10px;
        
    }
    .item1{
        margin-top:5px;
    }
    .item2{
        margin-top: 5px;
        width:500px;
        margin-left: 10px;
    }
    .item4{
        margin-left:10px;
    }

  
 
    .carousel{
       
        width:50%;
    }
  
</style>
<!--分頁table id=sort-table -->

<!--引入JavaScript-->
<script type="text/javascript" language="javascript" src="//code.jquery.com/jquery-1.12.4.js"></script>

<script type="text/javascript" language='javascript' charset="utf8" src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.js"></script>
<script>
$(document).ready( function () {
    
        $('#sort-table').DataTable({
            
            bProcessing: true,
            bStateSave:false,
            "orderClasses": false,
            "language": {
                    "lengthMenu": "顯示 _MENU_ 筆資料",
                    "sProcessing": "處理中...",
                    "sZeroRecords": "查無資料",
                    "sInfo": "目前有 _MAX_ 筆資料",
                    "sInfoEmpty": "目前共有 0 筆紀錄",
                    "sInfoFiltered": " ",
                    "sInfoPostFix": "",
                    "sSearch": "搜尋:",
                    "sUrl": "",
                    "sEmptyTable": "目前尚無資料",
                    "sLoadingRecords": "讀取資料中...",
                    "sInfoThousands": ",",
                    "oPaginate": {
                        "sFirst": "首頁",
                        "sPrevious": "上一頁",
                        "sNext": "下一頁",
                        "sLast": "末頁"
                    },
                    "order": [[0, "desc"]],
                    "oAria": {
                        "sSortAscending": ": 以升序排列此列",
                        "sSortDescending": ": 以降序排列此列"
                    }
            }
            
        } );
    } );

function myFunction() {
  
}



</script>

<script>
    
    var temp=0;  //暫存被運算數

    var strOper=0;  //暫存運算符號

    var valueM=0;  //m+ m- mc mr 暫存使用


    //數字鍵與小數點

    function numBtn(str) {

        //避免填入運算後的數字的後面

        if (strOper==null) {
            document.getElementById("box").value = str;
            strOper=0;
            return;
        };

       if (document.getElementById("box").value==0) { 
            document.getElementById("box").value = str;
        } else {
        document.getElementById("box").value += str;
        }

    }


    //運算符號

    function operBtn(str){

        //不按等號的連續運算

        equal();

        valueA=document.getElementById("box").value;
        strOper=str;

        document.getElementById("box").value=0;
    }

    //等於

    function equal(){   

        switch (strOper){
            case '+':
                document.getElementById("box").value=parseFloat(valueA)+parseFloat(document.getElementById("box").value);
                break;
            case '-':
                document.getElementById("box").value=parseFloat(valueA)-parseFloat(document.getElementById("box").value);
                break;
            case '*':
                document.getElementById("box").value=parseFloat(valueA)*parseFloat(document.getElementById("box").value);
                break;
            case '/':
                document.getElementById("box").value=parseFloat(valueA)/parseFloat(document.getElementById("box").value);
                break;
            default:
                break;
        }


        //防呆用

        temp=null;
        strOper=null;
    }

    //M鍵

    function buttonM(str){

        switch  (str) {
            case 'M+':
                valueM += parseFloat(document.getElementById("box").value);
                break;
            case 'M-':
                valueM -= parseFloat(document.getElementById("box").value);
                break;
            case 'MC':
                temp=0;
                strOper=0;
                valueM=0;
                document.getElementById("box").value = '0';
                break;
            case 'MR':
                document.getElementById("box").value  =  parseFloat(valueM);
                //防呆用

                temp=null;
                strOper=null;
                break;
            default:
                break;
        }

    }

    var isShow = false;
    function showTable() {
        if(!isShow) {
            isShow = true;
            document.getElementById('hideTable').style.display='';
        }
        else {
            isShow = false;
            document.getElementById('hideTable').style.display='none';
        }
    }


</script>


<table  id="hideTable" style="margin-left: 1500px;position: fixed;border: 5px;background-color:plum;">
    <tr>
        <td align="center" colspan="6" > 
            <input align="right" type="text" value="0" id="box"  />
        </td>
    </tr>
    <tr>
        <td >    <input id="mAdd" type="button" value="M+" onClick="buttonM('M+')">    </td>
        <td >    <input id="mMinus" type="button" value="M-" onClick="buttonM('M-')">   </td>
        <td >    <input id="mC" type="button" value="MC" onClick="buttonM('MC')">       </td>
        <td >    <input id="mR" type="button" value="MR" onClick="buttonM('MR')">       </td>
    </tr>


    <tr align="center" >
        <td>    <input  type="button" value="7" onClick="numBtn('7')">  </td>
        <td>    <input  type="button" value="8" onClick="numBtn('8')">  </td>
        <td>    <input  type="button" value="9" onClick="numBtn('9')">  </td>
        <td>    <input  type="button" value="+" onClick="operBtn('+')"> </td>
    </tr>

    <tr align="center">
        <td>    <input  type="button" value="4" onClick="numBtn('4')">  </td>
        <td>    <input  type="button" value="5" onClick="numBtn('5')">  </td>
        <td>    <input  type="button" value="6" onClick="numBtn('6')">  </td>
        <td>    <input  type="button" value="-" onClick="operBtn('-')"> </td>
    </tr>

    <tr align="center">
        <td>    <input  type="button" value="1" onClick="numBtn('1')">  </td>
        <td>    <input  type="button" value="2" onClick="numBtn('2')">  </td>
        <td>    <input  type="button" value="3" onClick="numBtn('3')">  </td>
        <td>    <input  type="button" value="*" onClick="operBtn('*')"> </td>
    </tr>

    <tr align="center">
        <td>    <input  type="button" value="0" onClick="numBtn('0')">  </td>
        <td>    <input  type="button" value="." onClick="numBtn('.')">  </td>
        <td>    <input  type="button" value="=" onClick="equal()">      </td>
        <td>    <input  type="button" value="/" onClick="operBtn('/')"> </td>
    </tr>
</table>
<!--分頁table -->





</html>